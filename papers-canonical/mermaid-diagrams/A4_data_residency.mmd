graph TB
    subgraph Residency["Data Residency Invariant"]
        Cells[Computing Cells<br/>S = {c1, c2, ..., cn}]
        Regions[Geographic Regions<br/>L(c) ∈ {US, EU, SG, ...}]
        DataClass[Data Classification<br/>D(R) ∈ {PII, Financial, Public}]
        
        Cells --> Regions
        Regions --> DataClass
        
        style Cells fill:#4A90E2,stroke:#2E5C8A,color:#fff
        style Regions fill:#50C878,stroke:#2E7D4E,color:#fff
        style DataClass fill:#FF6B6B,stroke:#CC5555,color:#fff
    end
    
    subgraph Invariant["Formal Invariant"]
        I1[∀R: D(R) ∈ SG_PII ⟹<br/>L(c_src) = Singapore ∧<br/>L(c_dst) = Singapore]
        
        style I1 fill:#A78BFA,stroke:#7C3AED,color:#fff,stroke-width:3px
    end
    
    DataClass --> I1
    
    subgraph Enforcement["Runtime Enforcement"]
        E1[Request: SG_PII data<br/>Source: Singapore<br/>Destination: US]
        E2[A4 Executive evaluates<br/>L(c_dst) ≠ Singapore]
        E3[Invariant violated!<br/>Request DENIED at edge]
        
        E1 --> E2 --> E3
        
        style E1 fill:#FEE2E2,stroke:#DC2626,color:#333
        style E2 fill:#FEE2E2,stroke:#DC2626,color:#333
        style E3 fill:#FEE2E2,stroke:#DC2626,color:#333,stroke-width:3px
    end
    
    I1 -.->|Enforces| E2
    
    Audit[Audit Trail:<br/>100% proof of compliance<br/>Zero cross-border violations]
    E3 --> Audit
    
    style Audit fill:#D1FAE5,stroke:#059669,color:#333,stroke-width:3px
