graph TB
    subgraph Before["Before A3: 100% Retention"]
        B1[100k RPS Ã— 86,400s<br/>= 8.64B requests/day]
        B2[100% trace retention<br/>= 8.64B traces stored]
        B3[Average trace size: 5 KB<br/>= 43.2 TB/day]
        B4[Monthly storage: 1.3 PB<br/>Cost: $1.2M/month]
        
        B1 --> B2 --> B3 --> B4
        
        style B1 fill:#FEE2E2,stroke:#DC2626,color:#333
        style B2 fill:#FEE2E2,stroke:#DC2626,color:#333
        style B3 fill:#FEE2E2,stroke:#DC2626,color:#333
        style B4 fill:#FEE2E2,stroke:#DC2626,color:#333,stroke-width:3px
    end
    
    subgraph After["After A3: Adaptive Sampling"]
        A1[8.64B requests/day]
        A2[Errors: 0.1% = 8.6M traces<br/>p99 outliers: 1% = 86M traces<br/>Cold paths: 0.5% = 43M traces<br/>Baseline: 1% = 86M traces]
        A3[Total retained: 6%<br/>= 518M traces]
        A4[Storage: 2.6 TB/day<br/>Monthly: 78 TB]
        A5[Cost: $150k/month<br/>Savings: $1.05M/month]
        
        A1 --> A2 --> A3 --> A4 --> A5
        
        style A1 fill:#D1FAE5,stroke:#059669,color:#333
        style A2 fill:#D1FAE5,stroke:#059669,color:#333
        style A3 fill:#D1FAE5,stroke:#059669,color:#333
        style A4 fill:#D1FAE5,stroke:#059669,color:#333
        style A5 fill:#D1FAE5,stroke:#059669,color:#333,stroke-width:3px
    end
    
    B4 -.->|85% reduction| A5
    
    Guarantee[100% Diagnostic Fidelity<br/>Zero missed errors or outliers]
    A3 --> Guarantee
    
    style Guarantee fill:#A78BFA,stroke:#7C3AED,color:#fff,stroke-width:3px
