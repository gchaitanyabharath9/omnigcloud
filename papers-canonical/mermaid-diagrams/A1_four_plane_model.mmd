graph TB
    subgraph Data_Plane[Data Plane - Synchronous]
        API[API Gateway<br/>Rate Limiting]
        Services[Business Services<br/>Stateless]
        Mesh[Service Mesh<br/>Envoy Proxy]
        WASM[Local Policy Cache<br/>WASM Runtime]
    end
    
    subgraph Control_Plane[Control Plane - Asynchronous]
        Registry[Service Registry<br/>Consul/etcd]
        Config[Config Server<br/>Feature Flags]
        Health[Health Monitor<br/>Auto-scaling]
    end
    
    subgraph Governance_Plane[Governance Plane - Asynchronous]
        Compiler[Policy Compiler<br/>Rego â†’ WASM]
        Audit[Audit Aggregator<br/>Compliance]
        Threat[Threat Intel<br/>CVE Feeds]
    end
    
    subgraph Persistence_Plane[Persistence Plane - Synchronous]
        DB[(Primary DB<br/>PostgreSQL)]
        Cache[(Redis Cache<br/>Hot Data)]
        Storage[(Object Storage<br/>S3/GCS)]
    end
    
    API --> Services
    Services --> Mesh
    Mesh --> WASM
    Services --> DB
    Services --> Cache
    
    Config -.->|Async Push| Mesh
    Registry -.->|Service Discovery| Mesh
    Compiler -.->|WASM Deploy| WASM
    WASM -.->|Decision Log| Audit
    
    style Data_Plane fill:#E8F5E9,stroke:#4CAF50,stroke-width:3px
    style Control_Plane fill:#E3F2FD,stroke:#2196F3,stroke-width:3px
    style Governance_Plane fill:#FFF3E0,stroke:#FF9800,stroke-width:3px
    style Persistence_Plane fill:#FCE4EC,stroke:#E91E63,stroke-width:3px
